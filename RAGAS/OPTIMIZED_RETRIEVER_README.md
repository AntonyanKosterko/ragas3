# –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ä–µ—Ç—Ä–∏–≤–µ—Ä–∞

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–§–∞–π–ª `config/optimized_retriever_config.yaml` —Å–æ–¥–µ—Ä–∂–∏—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–µ—Ç—Ä–∏–≤–µ—Ä–∞, –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –≥–∏–ø–µ—Ä–ø–∞—Ä–∞–º–µ—Ç—Ä–∏—á–µ—Å–∫–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Optuna.

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

- **–õ—É—á—à–∏–π trial**: `trial_12`
- **Objective Score**: `0.8002`
- **–≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç ID**: `328052029196781072`
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ trials**: 17
- **–û–±—Ä–∞–∑—Ü–æ–≤ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏**: 100

## üîß –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —á–∞–Ω–∫–∏–Ω–≥–∞
- `chunk_size`: 300 (–±—ã–ª–æ 1000)
- `chunk_overlap`: 80 (–±—ã–ª–æ 200)

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≥–∏–±—Ä–∏–¥–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞
- `search_type`: "hybrid"
- `semantic_weight`: 0.4 (40% —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫)
- `bm25_weight`: 0.6 (60% BM25 –ø–æ–∏—Å–∫)

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞
- `semantic_k`: 8 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞
- `bm25_k`: 16 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è BM25 –ø–æ–∏—Å–∫–∞
- `final_k`: 6 —Ñ–∏–Ω–∞–ª—å–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã BM25
- `bm25_k1`: 1.2
- `bm25_b`: 0.75

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –ª—É—á—à–µ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

- **MRR**: 0.9383
- **Precision**: 0.1650
- **Recall**: 0.9900
- **NDCG**: 0.9515
- **Hit Rate**: 0.9900
- **Retrieval Time**: 0.0326 —Å–µ–∫
- **Quality Score**: 0.8005

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
```bash
python test_rag.py --config config/optimized_retriever_config.yaml --max-samples 100
```

### –ó–∞–ø—É—Å–∫ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
```bash
python main.py --config config/optimized_retriever_config.yaml --interface gradio
```

### –ó–∞–ø—É—Å–∫ —Å MLflow –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
```bash
python test_rag.py --config config/optimized_retriever_config.yaml --max-samples 100
```

## üìà –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ MLflow

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ MLflow UI:
   ```bash
   mlflow ui --backend-store-uri file:./mlruns --host 0.0.0.0 --port 5000
   ```

2. –û—Ç–∫—Ä–æ–π—Ç–µ `http://localhost:5000`

3. –ù–∞–π–¥–∏—Ç–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç `RAG_Optimized_Retriever_Experiments`

## üîç –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –±–∞–∑–æ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ë–∞–∑–æ–≤–∞—è | –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è | –£–ª—É—á—à–µ–Ω–∏–µ |
|----------|---------|------------------|-----------|
| Chunk Size | 1000 | 300 | –ë–æ–ª–µ–µ —Ç–æ—á–Ω—ã–µ —á–∞–Ω–∫–∏ |
| Chunk Overlap | 200 | 80 | –ú–µ–Ω—å—à–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è |
| Search Type | similarity | hybrid | –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–∏—Å–∫ |
| K | 5 | 6 | –ë–æ–ª—å—à–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ |
| MRR | ~0.3 | 0.9383 | +213% |
| Hit Rate | ~0.4 | 0.9900 | +147% |

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –Ω–∞ 100 —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ–±—Ä–∞–∑—Ü–∞—Ö
- –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞–Ω—ã
- –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –ª—É—á—à–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–º –ø–æ–∏—Å–∫–æ–º
- BM25 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤—ã—Å–æ–∫—É—é recall, —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ - —Ç–æ—á–Ω–æ—Å—Ç—å

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ

–î–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –Ω–æ–≤—É—é –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é:
```bash
python simple_hyperparameter_optimization.py
```

–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –±—É–¥—É—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ `config/best_simple_retriever_config.yaml`.

